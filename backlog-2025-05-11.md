# Backlog · 10-Prompt Bootstrapper  (canonical task list)

📝 Legend  
- [ ] todo  ·  - [x] done  
🔄 update / refine   ⚠️ confirm with user before executing

---

## Phase 0 ▍Repo & Environment

- [x] Init git repo, add codex.md layers, PRD, `.python-version` (pb-3.11.9).  
- [x] Verify venv activation, install PocketFlow, WeasyPrint, React scaffold.  
- [x] Create GitHub Action: Python 3.11 + Node 18, run `pytest -q`, **no deploy yet**.  

---

## Phase 1 ▍Backend MVP (sync mode)

1. **PocketFlow DAG**  
   - [x] `FetchSummaryNode` web_search · truncate HTML to 4 k · retry×3.  
   - [x] `SummariseNode` produce ≤ 240-char master prompt.  
   - [x] `AssetsNode` logo_url + 3-5-HEX palette (ColorThief, cairosvg).  
   - [x] `PromptsNode` draft 3-5 groups × 5 prompts.  
   - [x] `RankNode` select best prompt per group.  
   - [x] `GuideNode` ≤ 40-word usage tips.  
   - [ ] **`PdfBuilderNode`** WeasyPrint → PDF bytes (streamed).  🔄  

2. **FastAPI endpoints**  
   - [ ] `POST /generate {url}` → run DAG, **stream PDF** in response.  
   - [ ] `GET /healthz` → 200 OK.  

3. **Unit & integration tests**  
   - [ ] Mock OpenAI; E2E test with `example.com`, total < 30 s.

---

## Phase 2 ▍Frontend MVP

- [ ] `/Generate` page – URL form → POST /generate, spinner, render prompt cards, **“Download PDF”**.  
- [ ] Tailwind + `fyne-core.css`, apply `palette[0]` to header.  
- [ ] Playwright e2e: generate prompts for `example.com`.

---

## Phase 3 ▍Optional Enhancements

- [ ] Switch to async queue: Redis + RQ → return `job_id`.  
- [ ] Upload PDF to S3 (or B2) + 24 h signed URL delivery.  
- [ ] **Save quick-view HTML** alongside PDF for WeasyPrint diffing.  
- [ ] Email sender Node (SES / Resend) with PDF link.  
- [ ] Postgres audit_log + PocketFlow Studio deployment.  
- [ ] Dark-mode PDF variant.

---

## Phase 4 ▍CI / Deploy

- [ ] Add Render deploy step to GitHub Action (Python dyno + static build).  
- [ ] Terraform / infra blueprints in `/infra/` – DB migrations only if Postgres is introduced.  
- [ ] Cost footprint check (stay ≤ $100 / mo).

---

### How Codex should update this file

* Tick `[x]` when a PR is merged **and commit the tick in that PR**.  
* Insert new tasks under the appropriate phase with a brief rationale.  
* If a task becomes blocked, add “⚠️ confirm with user …” to its line.
